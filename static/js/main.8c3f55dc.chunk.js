(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{255:function(e,t,n){},442:function(e,t){},447:function(e,t,n){},448:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),s=n(17),i=n.n(s),o=(n(255),n(43)),l=n(24),u=n(21),d=n(18),p=n(222),j=n(223),m=n(505),h=n(8),b={auth:!1,token:null,profile:null},O={modelName:null,errorMessage:null,notifierMessage:null,notifierType:null,itemFinderId:null},x=n(25),g={items:[],loadingItems:!1,cords:null,moreItems:!1},f=Object(d.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",a),Object(h.a)(Object(h.a)({},e),{},{auth:!0,token:a});case"SET_PROFILE":return Object(h.a)(Object(h.a)({},e),{},{profile:a});case"CLEAR_PROFILE":return localStorage.removeItem("token"),Object(h.a)(Object(h.a)({},e),{},{auth:!1,token:null,profile:null});default:return e}},form:m.a,model:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SingInModelOpen":return Object(h.a)(Object(h.a)({},e),{},{modelName:"SingInModel"});case"SingInModelClose":return Object(h.a)(Object(h.a)({},e),{},{modelName:null});case"AsynchronousStart":return Object(h.a)(Object(h.a)({},e),{},{modelName:"AsynchronousStart"});case"AsynchronousSuccess":return Object(h.a)(Object(h.a)({},e),{},{modelName:null});case"AsynchronousError":return Object(h.a)(Object(h.a)({},e),{},{modelName:null,errorMessage:a});case"DispalyNotifier":return Object(h.a)(Object(h.a)({},e),{},{modelName:"DispalyNotifier",notifierMessage:a.msg,notifierType:a.type});case"ClearDispalyNotifierData":return Object(h.a)(Object(h.a)({},e),{},{modelName:null,notifierMessage:null,notifierType:null});case"OpenChatApp":return Object(h.a)(Object(h.a)({},e),{},{modelName:"OpenChatApp",itemFinderId:a.id});case"ClearAllModels":return Object(h.a)(Object(h.a)({},e),{},{modelName:null,errorMessage:null,notifierMessage:null,notifierType:null});default:return Object(h.a)({},e)}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"FETCH_ITEMS_START":return Object(h.a)(Object(h.a)({},e),{},{loadingItems:!0});case"CLEAN_UP":return Object(h.a)(Object(h.a)({},e),{},{items:[],moreItems:!1});case"FETCH_ITEM_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{items:[].concat(Object(x.a)(e.items),Object(x.a)(a)),loadingItems:!1,moreItems:4===a.length});case"SEARCH_ITEM_START":return Object(h.a)(Object(h.a)({},e),{},{loadingItems:!0});case"SEARCH_ITEM_SUCCESS":var r=e.cords?[].concat(Object(x.a)(e.items),Object(x.a)(a.items)):Object(x.a)(a.items);return Object(h.a)(Object(h.a)({},e),{},{loadingItems:!1,items:r,cords:a.cords,moreItems:4===a.items.length});case"CLEAN_FETCHED_ITEMS":return Object(h.a)(Object(h.a)({},e),{},{items:[],cords:null});default:return e}}}),y=[j.a],v=Object(d.createStore)(f,{},Object(p.composeWithDevTools)(d.applyMiddleware.apply(void 0,y))),C=n(12),S=n(9),w=n(482),k=n(495),I=n(494),N=n(504),E=n(508),T=n(487),A=n(496),M=n(497),F=n(491),D=n(493),R=n(231),_=n.n(R),P=n.p+"static/media/logo.c7ead8a4.png",L=n(488),U=n(489),B=n(507),W=n(490),q=n(127),H=n(121),z=n.n(H),J=n(34),G=n(502),V=n(501),Y=n(499),X=n(2),$=Object(w.a)((function(e){return{root:{borderRadius:0}}})),K=function(e){var t=e.input,n=e.type,a=e.placeholder,r=e.autoComplete,s=e.required,i=e.meta,o=i.touched,l=i.error,u=$();return Object(X.jsx)(c.a.Fragment,{children:Object(X.jsx)(Y.a,Object(h.a)(Object(h.a)({},t),{},{type:n,error:!(!o||!l),style:{width:"100%",marginBottom:"10px"},label:o&&l?l:a,variant:"outlined",required:s,InputProps:{classes:u},autoComplete:r}))})},Q=n(11),Z=n.n(Q),ee=n(20),te=n(16),ne=n.n(te),ae=function(){return function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!localStorage.token){e.next=10;break}return(a=localStorage.token)?ne.a.defaults.headers.common["x-auth-token"]=a:delete ne.a.defaults.headers.common["x-auth-token"],e.next=5,ne.a.get("/auth/user");case 5:n=e.sent,t({type:"SET_PROFILE",payload:n.data}),t({type:"LOGIN_SUCCESS",payload:localStorage.token}),t({type:"AsynchronousSuccess"}),t({type:"DispalyNotifier",payload:{type:"success",msg:"Login successfully"}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}var a}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},re=Object(J.combineValidators)({name:Object(J.isRequired)({message:"Please Enter Your Name..."}),email:Object(J.isRequired)({message:"Please Enter Your Email..."}),password:Object(J.isRequired)({message:"Please Enter Your Password..."})}),ce=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},crossIcon:{position:"absolute",right:"15px",top:"10px",backgroundColor:e.palette.secondary.main,cursor:"pointer"}}})),se=Object(u.b)((function(e){return{}}),(function(e){return{register_user:function(t){return e(function(e){var t=e.name,n=e.email,a=e.password;return function(){var e=Object(ee.a)(Z.a.mark((function e(r){var c,s,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n,a),c={headers:{"Content-Type":"application/json"}},s=JSON.stringify({name:t,email:n,password:a}),e.prev=3,r({type:"AsynchronousStart"}),e.next=7,ne.a.post("/auth/register",s,c);case 7:i=e.sent,r({type:"REGISTER_SUCCESS",payload:i.data.token}),r(ae()),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),r({type:"AsynchronousError",payload:e.t0.response.data.errors[0].msg}),r({type:"DispalyNotifier",payload:{type:"error",msg:e.t0.response.data.errors[0].msg}});case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()}(t))}}}))(Object(V.a)({form:"RegisterForm",validate:re})(Object(l.f)((function(e){var t=e.setopenDrawerRegister,n=e.handleSubmit,a=e.register_user,r=ce();return Object(X.jsxs)(L.a,{maxWidth:"xl",component:"main",children:[Object(X.jsx)(U.a,{}),Object(X.jsx)(B.a,{className:r.crossIcon,onClick:t,children:"X"}),Object(X.jsx)(W.a,{container:!0,justify:"center",children:Object(X.jsx)(W.a,{item:!0,xs:12,sm:4,children:Object(X.jsxs)("div",{className:r.paper,children:[Object(X.jsx)(B.a,{className:r.avatar,children:Object(X.jsx)(z.a,{})}),Object(X.jsx)(q.a,{component:"h1",variant:"h5",children:"Registration"}),Object(X.jsxs)("form",{className:r.form,noValidate:!0,onSubmit:n((function(e){a(e),t()})),children:[Object(X.jsx)(G.a,{component:K,type:"name",placeholder:"Name",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0}),Object(X.jsx)(G.a,{component:K,type:"name",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",placeholder:"Email Address",name:"email",autoComplete:"email"}),Object(X.jsx)(G.a,{component:K,type:"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"password",placeholder:"Password",name:"password"}),Object(X.jsx)(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,children:"Registration"})]})]})})})]})})))),ie=Object(J.combineValidators)({email:Object(J.isRequired)({message:"Please Enter Your Email..."}),password:Object(J.isRequired)({message:"Please Enter Your Password..."})}),oe=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},crossIcon:{position:"absolute",right:"15px",top:"10px",backgroundColor:e.palette.secondary.main,cursor:"pointer"}}})),le=Object(u.b)((function(e){return{}}),(function(e){return{signin_user:function(t){return e(function(e){var t=e.email,n=e.password;return function(){var e=Object(ee.a)(Z.a.mark((function e(a){var r,c,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:t,password:n}),e.prev=2,a({type:"AsynchronousStart"}),e.next=6,ne.a.post("/auth/signin",c,r);case 6:s=e.sent,a({type:"LOGIN_SUCCESS",payload:s.data.token}),a(ae()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),a({type:"AsynchronousError",payload:e.t0.response.data.errors[0].msg}),a({type:"DispalyNotifier",payload:{type:"error",msg:e.t0.response.data.errors[0].msg}});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()}(t))}}}))(Object(V.a)({form:"SigninForm",validate:ie})(Object(l.f)((function(e){var t=e.openDrawerLogin,n=e.handleSubmit,a=e.signin_user,r=oe();return Object(X.jsxs)(L.a,{maxWidth:"xl",component:"main",children:[Object(X.jsx)(U.a,{}),Object(X.jsx)(B.a,{className:r.crossIcon,onClick:t,children:"X"}),Object(X.jsx)(W.a,{container:!0,justify:"center",children:Object(X.jsx)(W.a,{item:!0,xs:12,sm:4,children:Object(X.jsxs)("div",{className:r.paper,children:[Object(X.jsx)(B.a,{className:r.avatar,children:Object(X.jsx)(z.a,{})}),Object(X.jsx)(q.a,{component:"h1",variant:"h5",children:"Registration"}),Object(X.jsxs)("form",{className:r.form,noValidate:!0,onSubmit:n((function(e){a(e),t()})),children:[Object(X.jsx)(G.a,{component:K,type:"email",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",placeholder:"Email Address",name:"email",autoComplete:"email"}),Object(X.jsx)(G.a,{component:K,type:"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"password",placeholder:"Password",name:"password"}),Object(X.jsx)(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,children:"Login"})]})]})})})]})})))),ue=n(61),de=n.n(ue),pe=function(e){var t=e.sug,n=e.style,a=e.getSuggestionItemProps;return Object(X.jsx)("li",Object(h.a)(Object(h.a)({style:{fontWeight:"600",padding:"5px"}},a(t,{style:n})),{},{children:Object(X.jsx)("span",{style:{fontWeight:"300"},children:t.description})}))},je=function(e,t){return function(){var n=Object(ee.a)(Z.a.mark((function n(a,r){var c,s,i,o,l,u,d;return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=t.lat,s=t.lng,i=r().user.cords,!e||!i||JSON.stringify(i)!==JSON.stringify(t)){n.next=27;break}if(o=i.lat,l=i.lng,n.prev=4,a({type:"SEARCH_ITEM_START"}),a({type:"AsynchronousStart"}),!e||!i){n.next=13;break}return n.next=10,ne.a.get("/item/getitem/4/".concat(o,"/").concat(l,"?id=").concat(e));case 10:n.t0=n.sent,n.next=16;break;case 13:return n.next=15,ne.a.get("/item/getitem/4/".concat(o,"/").concat(l));case 15:n.t0=n.sent;case 16:return u=n.t0,a({type:"SEARCH_ITEM_SUCCESS",payload:{items:u.data,cords:t}}),a({type:"AsynchronousSuccess"}),n.abrupt("return",u.data);case 22:n.prev=22,n.t1=n.catch(4),console.log(n.t1.response.data.errors);case 25:n.next=49;break;case 27:if(n.prev=27,a({type:"CLEAN_UP"}),a({type:"SEARCH_ITEM_START"}),a({type:"AsynchronousStart"}),!e){n.next=37;break}return n.next=34,ne.a.get("/item/getitem/4/".concat(c,"/").concat(s,"?id=").concat(e));case 34:n.t2=n.sent,n.next=40;break;case 37:return n.next=39,ne.a.get("/item/getitem/4/".concat(c,"/").concat(s));case 39:n.t2=n.sent;case 40:return d=n.t2,a({type:"SEARCH_ITEM_SUCCESS",payload:{items:d.data,cords:t}}),a({type:"AsynchronousSuccess"}),n.abrupt("return",d.data);case 46:n.prev=46,n.t3=n.catch(27),console.log(n.t3.response.data.errors);case 49:case"end":return n.stop()}}),n,null,[[4,22],[27,46]])})));return function(e,t){return n.apply(this,arguments)}}()},me=Object(d.compose)(Object(u.b)((function(e){return{}}),(function(e){return{SearchItems:function(t,n){return e(je(t,n))}}})),l.f)((function(e){var t=e.SearchItems,n=e.location,a=e.history,c=Object(r.useState)(""),s=Object(C.a)(c,2),i=s[0],o=s[1],l=function(){var e=Object(ee.a)(Z.a.mark((function e(r){var c,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/"!==n.pathname&&a.push("/"),e.next=3,Object(ue.geocodeByAddress)(r);case 3:return c=e.sent,e.next=6,Object(ue.getLatLng)(c[0]);case 6:s=e.sent,o(r),t(null,s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){document.getElementsByClassName("location-search-input")[0].value=""}),[n.pathname]),Object(X.jsx)(r.Fragment,{children:Object(X.jsx)(W.a,{container:!0,direction:"column",children:Object(X.jsx)(de.a,{value:i,onChange:o,onSelect:l,children:function(e){var t=e.getInputProps,n=e.suggestions,a=e.getSuggestionItemProps,c=e.loading;return Object(X.jsxs)(r.Fragment,{children:[Object(X.jsx)(W.a,{item:!0,xs:12,children:Object(X.jsxs)("div",{style:{display:"flex"},children:[Object(X.jsx)("input",Object(h.a)(Object(h.a)({},t({placeholder:"Search...",className:"location-search-input"})),{},{type:"text",style:{outline:"none",border:"none",padding:"5px",height:"30px",width:"88%"}})),Object(X.jsx)("button",{style:{border:"none",width:"12%"},children:"Find"})]})}),Object(X.jsx)(W.a,{item:!0,xs:12,children:Object(X.jsx)("div",{style:{position:"absolute",top:"105%",left:"0",width:"100%"},children:Object(X.jsxs)(r.Fragment,{children:[c?Object(X.jsx)("h3",{children:"Loading..."}):null,Object(X.jsx)("ul",{style:{listStyleType:"none",margin:"0",paddingLeft:"0",backgroundColor:"white"},children:n.map((function(e){var t={backgroundColor:e.active?"rgb(164 178 183)":"#fff"};return Object(X.jsx)(pe,{sug:e,getSuggestionItemProps:a,style:t},e.placeId)}))})]})})})]})}})})})})),he=n(123),be=n.n(he),Oe=n(230),xe=n.n(Oe),ge=Object(w.a)((function(){return{root:{"& .MuiOutlinedInput-root":{borderRadius:"0"}}}})),fe=function(e){var t=e.setCoordinates,n=e.setAddress,a=e.address,c=ge(),s=function(){var e=Object(ee.a)(Z.a.mark((function e(a){var r,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.geocodeByAddress)(a);case 2:return r=e.sent,e.next=5,Object(ue.getLatLng)(r[0]);case 5:c=e.sent,console.log(c),n(a),t(c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsx)(r.Fragment,{children:Object(X.jsx)(de.a,{className:c.root,value:a,onChange:n,onSelect:s,children:function(e){var t=e.getInputProps,n=e.suggestions,a=e.getSuggestionItemProps,s=e.loading;return Object(X.jsxs)(r.Fragment,{children:[Object(X.jsx)(Y.a,Object(h.a)(Object(h.a)({},t({className:"location-search-input"})),{},{className:c.root,type:"name",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"location",placeholder:"search location or click on current location",name:"location",autoComplete:"off"})),Object(X.jsxs)(r.Fragment,{children:[s?Object(X.jsx)("h3",{children:"Loading..."}):null,Object(X.jsx)("ul",{style:{listStyleType:"none",margin:"0",paddingLeft:"0",backgroundColor:"white"},children:n.map((function(e){console.log(n);var t={backgroundColor:e.active?"rgb(164 178 183)":"#fff"};return Object(X.jsx)(pe,{sug:e,getSuggestionItemProps:a,style:t},e.placeId)}))})]})]})}})})},ye=n(228),ve=n(32),Ce=n(500),Se=function(e){var t=e.selectedDate,n=e.handleDateChange;return Object(X.jsx)(ve.a,{utils:ye.a,children:Object(X.jsx)(Ce.a,{margin:"normal",id:"date-picker-dialog",label:"Date picker dialog",format:"MM/DD/yyyy",value:t,onChange:n,KeyboardButtonProps:{"aria-label":"change date"}})})},we=Object(J.combineValidators)({name:Object(J.isRequired)({message:"Please Enter Item Description..."}),location:Object(J.isRequired)({message:"Please Select Item Location..."}),date:Object(J.isRequired)({message:"Please Enter Date..."}),detail:Object(J.isRequired)({message:"Please enter at least 1 hint about the product"})}),ke=Object(w.a)((function(e){return{root:{borderRadius:0},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),borderRadius:0},crossIcon:{position:"absolute",right:"15px",top:"10px",backgroundColor:e.palette.secondary.main,cursor:"pointer"},itemImage:Object(S.a)({},e.breakpoints.down("sm"),{width:"100%"}),datePicker:{"& .MuiFormControl-root":{width:"100%"}},extraTextFields:{marginBottom:"10px",width:"100%","& .MuiOutlinedInput-root":{borderRadius:"0"}}}})),Ie=Object(u.b)((function(e){return{}}),(function(e){return{item_upload:function(t){return e((n=t,function(){var e=Object(ee.a)(Z.a.mark((function e(t){var a,r,c,s,i,o,l,u,d,p,j,m,h;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.name,r=n.date,c=n.details,s=n.coordinates,i=s.lat,o=s.lng,l=n.file,u=n.address,d={headers:{"Content-Type":"application/json"}},p={headers:{"Content-Type":"multipart/form-data"}},e.prev=3,(j=new FormData).append("file",l),t({type:"AsynchronousStart"}),e.next=9,ne.a.post("/item/upload",j,p);case 9:return m=e.sent,h=JSON.stringify({name:a,date:r,details:c,lat:i,lng:o,file:m.data,address:u}),e.next=13,ne.a.post("/item/save-item",h,d);case 13:e.sent,t({type:"AsynchronousSuccess"}),t({type:"DispalyNotifier",payload:{type:"success",msg:"Item Added"}}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.log(e.t0.response.data.errors);case 21:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}()));var n}}}))(Object(V.a)({form:"UploadItemForm",validate:we})(Object(l.f)((function(e){var t=e.setopenDrawerUpload,n=e.handleSubmit,a=e.item_upload,c=Object(r.useState)([]),s=Object(C.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)(null),u=Object(C.a)(l,2),d=u[0],p=u[1],j=Object(r.useState)(null),m=Object(C.a)(j,2),b=m[0],O=m[1],g=Object(r.useState)(new Date),f=Object(C.a)(g,2),y=f[0],v=f[1],S=Object(r.useState)(""),w=Object(C.a)(S,2),k=w[0],I=w[1],N=ke();return Object(X.jsxs)(L.a,{maxWidth:"xl",component:"main",children:[Object(X.jsx)(U.a,{}),Object(X.jsx)(B.a,{className:N.crossIcon,onClick:t,children:"X"}),Object(X.jsx)(W.a,{container:!0,justify:"center",children:Object(X.jsx)(W.a,{item:!0,xs:12,sm:12,children:Object(X.jsxs)("div",{className:N.paper,children:[Object(X.jsx)(q.a,{component:"h1",variant:"h5",children:"Upload Items"}),Object(X.jsxs)("form",{className:N.form,noValidate:!0,onSubmit:n((function(e){if(d)if(b){var n=[];i.forEach((function(e){""!==document.getElementById(e).value.trim()&&n.push(document.getElementById(e).value)})),e.details=[e.detail].concat(n);var r=Object(h.a)(Object(h.a)({},e),{},{date:y,coordinates:d,file:b,address:k});delete r.detail,a(r),t()}else alert("Please Select A Picture");else alert("Please Select A Location")})),children:[Object(X.jsx)(G.a,{component:K,type:"name",placeholder:"Item description",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0}),Object(X.jsx)(fe,{setCoordinates:p,setAddress:I,address:k}),Object(X.jsx)(F.a,{variant:"contained",color:"primary",fullWidth:!0,style:{borderRadius:0},onClick:function(){document.getElementById("select-image").click()},children:"Upload Picture"}),Object(X.jsx)("input",{type:"file",onChange:function(e){var t=!1;e.target.files[0]&&(t=!0),t&&be.a.imageFileResizer(e.target.files[0],500,300,"JPEG",100,0,(function(e){if(O(e),e){var t=URL.createObjectURL(e);document.getElementById("display-item-image").src=t}}),"file",500,300)},accept:"image/*",id:"select-image",style:{display:"none"}}),Object(X.jsx)("div",{style:{textAlign:"center",margin:"5px 0"},children:b&&Object(X.jsx)("img",{id:"display-item-image",className:N.itemImage,alt:"item"})}),Object(X.jsx)(q.a,{variant:"h6",children:"Date*"}),Object(X.jsx)("div",{className:N.datePicker,children:Object(X.jsx)(Se,{selectedDate:y,handleDateChange:function(e){v(e._d)}})}),Object(X.jsx)(q.a,{variant:"h6",children:"Details*"}),Object(X.jsx)(G.a,{component:K,name:"detail",placeholder:"please enter a hint",type:"text",style:{width:"100%",marginBottom:"10px"},variant:"outlined",required:!0}),i.map((function(e){return Object(X.jsx)(Y.a,{id:e.toString(),type:"text",className:N.extraTextFields,variant:"outlined",required:!0},e)})),Object(X.jsx)(D.a,{onClick:function(){var e=Object(x.a)(i);0===i.length?e.push(1):e.push(i[i.length-1]+1),o(e)},children:Object(X.jsx)(xe.a,{})}),Object(X.jsx)(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:N.submit,children:"Upload Item"})]})]})})})]})})))),Ne=function(e){var t=e.item,n=t.img,a=t.name,c=t.address,s=t.details,i=t._id,o=e.deleteItem;return Object(X.jsxs)(r.Fragment,{children:[Object(X.jsx)(W.a,{item:!0,sm:6,children:Object(X.jsx)("img",{src:"http://localhost:5000/".concat(n),alt:"LPF",style:{width:"100%"}})}),Object(X.jsxs)(W.a,{item:!0,sm:6,children:[Object(X.jsx)("h1",{children:a}),Object(X.jsx)("p",{children:c}),Object(X.jsxs)("div",{children:[Object(X.jsx)("h3",{children:"Details"}),Object(X.jsx)("ul",{style:{textTransform:"capitalize"},children:s.map((function(e,t){return Object(X.jsx)("li",{children:e},t)}))})]}),Object(X.jsx)("div",{children:Object(X.jsx)(F.a,{variant:"text",onClick:function(){return o(i)},color:"default",children:"Delete"})})]})]})},Ee=Object(w.a)((function(e){return{crossIcon:{position:"absolute",right:"15px",top:"10px",backgroundColor:e.palette.secondary.main,cursor:"pointer"},itemContainer:{border:"1px solid #46373754",margin:"5px",borderRadius:"3px","&:hover":{border:"1px solid #00000069"}}}})),Te=function(e){var t=e.setsavedItem,n=Object(r.useState)(null),a=Object(C.a)(n,2),c=a[0],s=a[1],i=Ee();Object(r.useEffect)((function(){o()}),[]);var o=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("/item/saveditems");case 2:t=e.sent,console.log(t.data),s(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(ee.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.a.post("/item/deleteitem/".concat(t));case 3:e.sent,o(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsxs)(L.a,{maxWidth:"xl",component:"main",children:[Object(X.jsx)(U.a,{}),Object(X.jsx)(B.a,{className:i.crossIcon,onClick:t,children:"X"}),Object(X.jsx)(W.a,{container:!0,children:Object(X.jsx)(W.a,{item:!0,xs:12,sm:4,children:Object(X.jsx)("h1",{children:"Saved Items"})})}),Object(X.jsx)(W.a,{container:!0,children:c&&c.length>0&&c.map((function(e){return Object(X.jsx)(W.a,{container:!0,className:i.itemContainer,children:Object(X.jsx)(Ne,{deleteItem:l,item:e},e._id)})}))})]})},Ae=Object(w.a)((function(e){return{appbar:{backgroundColor:"transparent"},title:{flexGrow:"1",cursor:"pointer"},searchArea:{height:"80vh",backgroundSize:"cover",position:"relative",backgroundImage:"url(https://images.pexels.com/photos/705164/computer-laptop-work-place-camera-705164.jpeg?auto=compress&cs=tinysrgb&h=750&w=1260)"},searchBarContainer:Object(S.a)({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",width:"50%"},e.breakpoints.down("sm"),{width:"90%"}),drawer:{width:"190px"},list:{width:"180px"}}})),Me=Object(u.b)((function(e){return{auth:e.auth.auth}}),(function(e){return{logout:function(){return e({type:"CLEAR_PROFILE"})},openChatAppModel:function(){return e({type:"OpenChatApp",payload:{id:"messenger"}})}}}))(Object(l.f)((function(e){var t=Object(r.useState)(!1),n=Object(C.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(C.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(!1),d=Object(C.a)(u,2),p=d[0],j=d[1],m=Object(r.useState)(!1),h=Object(C.a)(m,2),b=h[0],O=h[1],x=Object(r.useState)(!1),g=Object(C.a)(x,2),f=g[0],y=g[1],v=e.auth,S=e.logout,w=e.openChatAppModel,R=e.history,L=Ae(),U=function(){w()};return Object(X.jsxs)(r.Fragment,{children:[Object(X.jsx)(k.a,{position:"absolute",color:"primary",className:L.appbar,children:Object(X.jsxs)(I.a,{children:[Object(X.jsx)(N.a,{smUp:!0,children:Object(X.jsx)(E.a,{className:L.drawer,variant:"temporary",anchor:"right",open:b,onClose:function(){return O(!1)},children:Object(X.jsx)(T.a,{className:L.list,children:v?Object(X.jsxs)(r.Fragment,{children:[Object(X.jsx)(A.a,{button:!0,onClick:function(){y(!0),O(!1)},children:Object(X.jsx)(M.a,{primary:"SAVED ITEMS"})}),Object(X.jsx)(A.a,{button:!0,onClick:U,children:Object(X.jsx)(M.a,{primary:"MESSENGER"})}),Object(X.jsx)(A.a,{button:!0,onClick:function(){j(!0),O(!1)},children:Object(X.jsx)(M.a,{primary:"POST ITEM"})}),Object(X.jsx)(A.a,{button:!0,onClick:function(){S(),O(!1)},children:Object(X.jsx)(M.a,{primary:"LOGOUT"})})]}):Object(X.jsxs)(r.Fragment,{children:[Object(X.jsx)(A.a,{button:!0,onClick:function(){c(!0),O(!1)},children:Object(X.jsx)(M.a,{primary:"SIGN IN"})}),Object(X.jsx)(A.a,{button:!0,onClick:function(){l(!0),O(!1)},children:Object(X.jsx)(M.a,{primary:"REGISTER"})})]})})})}),Object(X.jsx)("div",{className:L.title,onClick:function(){return R.push("/")},children:Object(X.jsx)("img",{src:P,alt:"LPF",style:{width:"150px",height:"150px"}})}),Object(X.jsx)(N.a,{xsDown:!0,children:v?Object(X.jsxs)(r.Fragment,{children:[Object(X.jsx)(F.a,{color:"inherit",onClick:function(){return y(!0)},children:"Saved Items"}),Object(X.jsx)(F.a,{color:"inherit",onClick:U,children:"Messenger"}),Object(X.jsx)(F.a,{color:"inherit",onClick:function(){return j(!0)},children:"Post Lost Item"}),Object(X.jsx)(F.a,{color:"inherit",onClick:S,children:"Logout"})]}):Object(X.jsxs)(r.Fragment,{children:[Object(X.jsx)(F.a,{color:"inherit",onClick:function(){return l(!0)},children:"Register"}),Object(X.jsx)(F.a,{color:"inherit",onClick:function(){return c(!0)},children:"Login"})]})}),Object(X.jsx)(N.a,{smUp:!0,children:Object(X.jsx)(D.a,{"aria-label":"MENU",onClick:function(){return O(!0)},children:Object(X.jsx)(_.a,{style:{color:"white"}})})})]})}),Object(X.jsx)("div",{className:L.searchArea,children:Object(X.jsx)("div",{className:L.searchBarContainer,children:Object(X.jsx)(me,{})})}),Object(X.jsx)(E.a,{variant:"temporary",anchor:"top",open:a,children:Object(X.jsx)("div",{style:{height:"100vh"},children:Object(X.jsx)(le,{openDrawerLogin:function(){return c(!1)}})})}),Object(X.jsx)(E.a,{variant:"temporary",anchor:"top",open:o,children:Object(X.jsx)("div",{style:{height:"100vh"},children:Object(X.jsx)(se,{setopenDrawerRegister:function(){return l(!1)}})})}),Object(X.jsx)(E.a,{variant:"temporary",anchor:"top",open:p,children:Object(X.jsx)("div",{style:{height:"100vh"},children:Object(X.jsx)(Ie,{setopenDrawerUpload:function(){return j(!1)}})})}),Object(X.jsx)(E.a,{variant:"temporary",anchor:"top",open:f,children:Object(X.jsx)("div",{style:{height:"100vh"},children:Object(X.jsx)(Te,{setsavedItem:function(){return y(!1)}})})})]})}))),Fe=Object(d.compose)(Object(u.b)((function(e){return{auth:e.auth.auth,currentUserId:e.auth}}),(function(e){return{FetchProductDetails:function(t){return e(function(e){return Object(ee.a)(Z.a.mark((function t(){var n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne.a.get("/item/getitemdetails/".concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.response.data.errors);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}(t))},AsynchronousStartModel:function(){return e({type:"AsynchronousStart"})},AsynchronousSuccessModel:function(){return e({type:"AsynchronousSuccess"})},DispalyNotifierModel:function(){return e({type:"DispalyNotifier",payload:{msg:"Please first login",type:"info"}})},ClearDispalyNotifierData:function(){return e({type:"ClearDispalyNotifierData"})},OpenChatAppModel:function(t){return e({type:"OpenChatApp",payload:{id:t}})}}})))(Object(l.f)((function(e){var t=e.FetchProductDetails,n=e.AsynchronousStartModel,a=e.AsynchronousSuccessModel,c=e.DispalyNotifierModel,s=e.auth,i=e.ClearDispalyNotifierData,o=e.OpenChatAppModel,l=e.currentUserId,u=Object(r.useState)(null),d=Object(C.a)(u,2),p=d[0],j=d[1];Object(r.useEffect)((function(){Object(ee.a)(Z.a.mark((function r(){var c;return Z.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(),r.next=3,t(e.match.params.id);case 3:c=r.sent,a(),console.log(c.finderId),j(c);case 7:case"end":return r.stop()}}),r)})))(),document.getElementsByClassName("location-search-input")[0].value=""}),[]);return Object(X.jsx)(r.Fragment,{children:p&&Object(X.jsxs)(W.a,{container:!0,children:[Object(X.jsx)(W.a,{item:!0,xs:12,sm:6,children:Object(X.jsx)("img",{src:"http://localhost:5000/".concat(p.img),alt:"LPF",style:{width:"100%"}})}),Object(X.jsxs)(W.a,{item:!0,xs:12,sm:6,children:[Object(X.jsx)("h1",{children:p.name}),Object(X.jsxs)("h3",{children:["Product id:",p._id]}),Object(X.jsx)("p",{children:p.address}),Object(X.jsxs)("div",{children:[Object(X.jsx)("h3",{children:"Details"}),Object(X.jsx)("ul",{children:p.details.map((function(e,t){return Object(X.jsx)("li",{children:e},t)}))})]}),Object(X.jsx)("div",{children:l&&l.profile&&p.finderId!==l.profile._id&&Object(X.jsx)(F.a,{variant:"text",color:"default",onClick:function(){if(!s)return c(),void setTimeout((function(){return i()}),2e3);o(p.finderId)},children:"Contact Finder"})})]})]})})}))),De=n(36),Re=n(29),_e=n(44),Pe=n(124),Le=Object(w.a)((function(){return{parrent:{position:"relative",border:"1px solid #e7e3e3",width:"100%",height:"300px",cursor:"pointer","&:hover":{"& $overlay":{opacity:"1"}}},overlay:{position:"absolute",bottom:"0",background:"rgba(0, 0, 0, 0.5)",width:"100%",transition:".5s ease",opacity:"0",color:"white",fontSize:"20px","& p":Object(S.a)({margin:"0",fontSize:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"textOverflow","ellipsis"),"& p:nth-child(1)":{width:"170px"},"& p:nth-child(2)":{width:"270px"}}}})),Ue=function(e){var t=e.id,n=e.img,a=e.name,r=e.history,c=e.address,s=Le();return Object(X.jsx)(W.a,{item:!0,xs:12,sm:4,children:Object(X.jsx)("div",{onClick:function(){return r.push("/details/".concat(t))},className:s.parrent,style:{backgroundImage:"url(http://localhost:5000/".concat(n,")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"},children:Object(X.jsxs)("div",{className:s.overlay,children:[Object(X.jsx)("p",{children:a}),Object(X.jsx)("p",{children:c})]})})},t)},Be=function(e){Object(_e.a)(n,e);var t=Object(Pe.a)(n);function n(){var e;Object(De.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={items:e.props.fetchedItems,moreItems:e.props.moreItems},e.lazyLoader=Object(ee.a)(Z.a.mark((function t(){var n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=document.documentElement.scrollHeight-window.innerHeight<=window.scrollY,e.props.moreItems&&n&&e.fetchNextItems();case 2:case"end":return t.stop()}}),t)}))),e.fetchNextItems=Object(ee.a)(Z.a.mark((function t(){var n,a,r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.items,a=e.props.cords,r=n[n.length-1]._id,!a){t.next=8;break}return t.next=6,e.props.SearchItems(r,a);case 6:t.next=10;break;case 8:return t.next=10,e.props.FetchItems(r);case 10:case"end":return t.stop()}}),t)}))),e}return Object(Re.a)(n,[{key:"componentDidMount",value:function(){var e=Object(ee.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.FetchItems();case 2:window.addEventListener("scroll",this.lazyLoader);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){return window.removeEventListener("scroll",this.lazyLoader),this.props.CleanUp()}},{key:"componentDidUpdate",value:function(e){JSON.stringify(this.props.fetchedItems)!==JSON.stringify(e.fetchedItems)&&this.setState({items:this.props.fetchedItems})}},{key:"render",value:function(){var e=this.props.history;return Object(X.jsx)(r.Fragment,{children:Object(X.jsxs)(W.a,{container:!0,justify:"center",style:{marginTop:"10px"},children:[Object(X.jsx)(W.a,{item:!0,container:!0,style:{width:"95%"},spacing:2,children:this.state.items.map((function(t){var n=t.name,a=t.img,r=t._id,c=t.address;return Object(X.jsx)(Ue,{history:e,name:n,img:a,id:r,address:c},r)}))}),this.props.loading&&0!==this.state.items.length?Object(X.jsx)("h3",{children:"Loading..."}):null,this.props.moreItems?null:Object(X.jsx)("h3",{children:"nothing more to explore"})]})})}}]),n}(r.Component),We=Object(d.compose)(Object(u.b)((function(e){return{fetchedItems:e.user.items,loading:e.user.loadingItems,cords:e.user.cords,moreItems:e.user.moreItems}}),(function(e){return{FetchItems:function(t){return e(function(e,t){return function(){var t=Object(ee.a)(Z.a.mark((function t(n,a){var r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n({type:"FETCH_ITEMS_START"}),!e){t.next=8;break}return t.next=5,ne.a.get("/item/get-items/4/".concat(e));case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,ne.a.get("/item/get-items/4");case 10:t.t0=t.sent;case 11:return r=t.t0,n({type:"FETCH_ITEM_SUCCESS",payload:r.data}),t.abrupt("return",r.data);case 16:t.prev=16,t.t1=t.catch(0),console.log(t.t1.response.data.errors);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e,n){return t.apply(this,arguments)}}()}(t))},SearchItems:function(t,n){return e(je(t,n))},CleanUp:function(){return e({type:"CLEAN_FETCHED_ITEMS"})}}}))(Object(l.f)(Be))),qe=function(){return Object(X.jsx)(r.Fragment,{children:Object(X.jsx)(We,{})})},He=n(498),ze=n(234),Je=n.n(ze),Ge=n(233),Ve=n.n(Ge),Ye=n(232),Xe=n.n(Ye),$e=Object(d.compose)(Object(u.b)((function(e){return{currentUserId:e.auth.profile._id}}),null))(Object(l.f)((function(e){var t=e.classes,n=e.msg,a=e.currentUserId===n.senderId;return console.log(n.type),e.location.pathname.includes("/details/")&&"Text"!=n.type&&(n.message="http://localhost:5000/".concat(n.message)),Object(X.jsx)(r.Fragment,{children:a?"Text"==n.type?Object(X.jsx)(r.Fragment,{children:Object(X.jsx)(W.a,{item:!0,container:!0,justify:"flex-end",className:t.currentUserMessageContainer,children:Object(X.jsx)("p",{className:t.currentUserMessage,children:n.message})})}):Object(X.jsx)(r.Fragment,{children:Object(X.jsx)(W.a,{item:!0,container:!0,justify:"flex-end",className:t.currentUserMessageContainer,children:Object(X.jsx)("img",{src:n.message,style:{width:"300px",height:"300px"}})})}):"Text"==n.type?Object(X.jsx)(r.Fragment,{children:Object(X.jsx)(W.a,{item:!0,container:!0,className:t.userMessageContainer,children:Object(X.jsx)(W.a,{item:!0,children:Object(X.jsx)("p",{className:t.userMessage,children:n.message})})})}):Object(X.jsx)(r.Fragment,{children:Object(X.jsx)(W.a,{item:!0,container:!0,className:t.userMessageContainer,children:Object(X.jsx)(W.a,{item:!0,children:Object(X.jsx)("img",{src:n.message,style:{width:"300px",height:"300px"}})})})})})}))),Ke=function(e){var t=e.messages,n=e.classes,a=e.socket,c=e.setMessages;return Object(r.useEffect)((function(){var e=document.getElementById("messagesArea"),t=e.scrollHeight;e.scrollTo({top:t,left:0,behavior:"smooth"}),a.on("message",(function(n){c((function(e){return[].concat(Object(x.a)(e),[n])})),e.scrollTo({top:t,left:0,behavior:"smooth"})}))}),[]),Object(X.jsx)(X.Fragment,{children:t.map((function(e,t){return Object(X.jsx)($e,{msg:e,classes:n},t)}))})},Qe=Object(w.a)((function(e){return{appContainer:{position:"fixed",width:"100%",height:"100vh",backgroundColor:"white",top:0,left:0,zIndex:1111111},users:{height:"100vh",borderRight:"1px solid #dfcccc"},userMessages:{height:"100vh"},list:{width:"100%",backgroundColor:e.palette.background.paper,padding:0,overflow:"auto","&::-webkit-scrollbar":{width:"0.5em"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#d4d4d4"}},noConversations:{textAlign:"center",textTransform:"capitalize",width:"100%"},messengerIsEmpty:{textTransform:"capitalize",textAlign:"center"},userInfo:{padding:"5px",borderBottom:"1px solid #dfcccc",userSelect:"none"},messagesArea:{height:"75vh",padding:"5px",flexWrap:"nowrap",overflow:"auto","&::-webkit-scrollbar":{width:"0.5em"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#d4d4d4"}},messageTypingArea:{borderTop:" 1px solid #dfcccc"},messageTypingInnerArea:{margin:"15px 0"},userMessageContainer:{marginBottom:"5px"},userMessage:{backgroundColor:"#ccccc0",margin:"0",padding:"5px 5px",borderRadius:"8px 8px 8px 0px",marginLeft:"5px",maxWidth:"500px",lineBreak:"anywhere"},currentUserMessageContainer:{marginBottom:"5px"},currentUserMessage:{backgroundColor:"#ccccc0",margin:"0",padding:"5px 5px",borderRadius:"8px 8px 0px 8px",maxWidth:"500px",marginRight:"5px",lineBreak:"anywhere"},messageTypingInput:{outline:"none",border:"1px solid #bcb8b8",width:"100%",resize:"none",height:"87%"},messgaeSendButton:{outline:"none",border:"1px solid #bcb8b8",height:"100%",cursor:"pointer"}}})),Ze=Object(u.b)((function(e){return{itemFinderId:e.model.itemFinderId,currentUserId:e.auth.profile._id}}),(function(e){return{ClearAllModels:function(){return e({type:"ClearAllModels"})}}}))((function(e){var t=Object(r.useState)(null),n=Object(C.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)([]),o=Object(C.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)({id:null,name:null}),p=Object(C.a)(d,2),j=p[0],m=p[1],h=Object(r.useState)(null),b=Object(C.a)(h,2),O=b[0],g=b[1],f=Object(r.useState)(""),y=Object(C.a)(f,2),v=y[0],S=y[1],w=Object(r.useState)(!1),k=Object(C.a)(w,2),I=k[0],E=k[1],F=Object(r.useState)(null),R=Object(C.a)(F,2),_=(R[0],R[1],Object(r.useState)(null)),P=Object(C.a)(_,2),L=(P[0],P[1]),U=Qe(),H=e.ClearAllModels,z=e.itemFinderId,J=e.currentUserId;Object(r.useEffect)((function(){var e=document.getElementsByTagName("body")[0];(e.style.overflow="hidden",z)&&(document.getElementById("textArea").focus(),Object(ee.a)(Z.a.mark((function e(){var t,n,a,r,c,i,o,l,d,p,j;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("messenger"===z){e.next=28;break}return e.next=3,ne.a.get("/auth/userinfo/".concat(z));case 3:return t=e.sent,e.next=6,ne.a.get("/auth/chat/".concat(z,"/").concat(J));case 6:return n=e.sent,e.next=9,ne.a.get("/auth/chatusers");case 9:a=e.sent,r=[],c=0;case 12:if(!(c<a.data.length)){e.next=21;break}if(z===a.data[c]){e.next=18;break}return e.next=16,ne.a.get("/auth/userinfo/".concat(a.data[c]));case 16:i=e.sent,r.push(i.data);case 18:c++,e.next=12;break;case 21:u(r),m({id:z,name:t.data.name}),L(z),g(n.data),s(t.data),e.next=53;break;case 28:return e.next=30,ne.a.get("/auth/chatusers");case 30:if(!((o=e.sent).data.length>0)){e.next=52;break}l=[],d=0;case 34:if(!(d<o.data.length)){e.next=43;break}if(z===o.data[d]){e.next=40;break}return e.next=38,ne.a.get("/auth/userinfo/".concat(o.data[d]));case 38:p=e.sent,l.push(p.data);case 40:d++,e.next=34;break;case 43:return e.next=45,ne.a.get("/auth/chat/".concat(l[0]._id,"/").concat(J));case 45:j=e.sent,L(l[0]._id),u(l),m({id:l[0]._id,name:l[0].name}),g(j.data),e.next=53;break;case 52:E(!0);case 53:case"end":return e.stop()}}),e)})))());return function(){e.style.overflow="auto"}}),[]);var G=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,n,r,c,s,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.trim(),n={headers:{"Content-Type":"application/json"}},!t){e.next=19;break}return e.prev=3,r=JSON.stringify({message:t,type:"Text"}),e.next=7,ne.a.post("/auth/chat/".concat(j.id),r,n);case 7:c=e.sent,g((function(e){return[].concat(Object(x.a)(e),[c.data])})),s=document.getElementById("messagesArea"),i=s.scrollHeight,s.scrollTo({top:i,left:0,behavior:"smooth"}),a.emit("private",c.data),S(""),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0.response.data.errors[0].msg);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(ee.a)(Z.a.mark((function e(t,n){var a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===j.id){e.next=7;break}return e.next=3,ne.a.get("/auth/chat/".concat(t,"/").concat(J));case 3:a=e.sent,L(t),m({id:t,name:n}),g(a.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return(a=Xe.a.connect("http://localhost:5000")).emit("login",{userId:J}),function(){a.emit("off",{userId:J})}}),[]);return Object(X.jsx)("div",{className:U.appContainer,children:Object(X.jsxs)(W.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(X.jsx)(N.a,{smDown:!0,children:Object(X.jsxs)(W.a,{item:!0,sm:2,className:U.users,container:!0,direction:"column",justify:"flex-start",alignItems:"flex-start",children:[Object(X.jsxs)(T.a,{className:U.list,children:[c&&Object(X.jsxs)(A.a,{button:!0,onClick:function(){return V(c._id,c.name)},children:[Object(X.jsx)(He.a,{children:Object(X.jsx)(B.a,{children:c.name.charAt(0)})}),Object(X.jsx)(M.a,{primary:c.name})]}),l.length>0&&l.map((function(e){return Object(X.jsxs)(A.a,{button:!0,onClick:function(){return V(e._id,e.name)},children:[Object(X.jsx)(He.a,{children:Object(X.jsx)(B.a,{children:e.name.charAt(0)})}),Object(X.jsx)(M.a,{primary:e.name})]},e._id)}))]}),I&&Object(X.jsx)("h4",{className:U.noConversations,children:"No Conversations"})]})}),Object(X.jsxs)(W.a,{item:!0,sm:10,xs:12,className:U.userMessages,children:[Object(X.jsxs)(W.a,{container:!0,justify:"space-between",alignItems:"center",className:U.userInfo,children:[Object(X.jsx)(W.a,{item:!0,children:Object(X.jsx)(q.a,{variant:"h4",children:j?j.name:I?null:"Loading"})}),Object(X.jsx)(W.a,{item:!0,children:Object(X.jsx)(D.a,{onClick:H,children:Object(X.jsx)(Ve.a,{})})})]}),Object(X.jsx)(W.a,{className:U.messagesArea,id:"messagesArea",children:O?Object(X.jsx)(Ke,{messages:O,classes:U,setMessages:g,socket:a}):I?Object(X.jsx)("p",{className:U.messengerIsEmpty,children:"Welcome To The Messenger"}):"Loading..."}),Object(X.jsx)(W.a,{container:!0,justify:"center",className:U.messageTypingArea,children:Object(X.jsxs)(W.a,{item:!0,container:!0,justify:"center",alignItems:"stretch",className:U.messageTypingInnerArea,children:[Object(X.jsxs)(W.a,{item:!0,container:!0,justify:"center",xs:1,children:[Object(X.jsx)(D.a,{onClick:function(){document.getElementById("select-image").click()},children:Object(X.jsx)(Je.a,{})}),Object(X.jsx)("input",{type:"file",onChange:function(e){var t=!1;e.target.files[0]&&(t=!0),console.log(t),t&&be.a.imageFileResizer(e.target.files[0],500,300,"JPEG",100,0,function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n,r,c,s,i,o,l,u;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"multipart/form-data"}},r={headers:{"Content-Type":"application/json"}},e.prev=2,(c=new FormData).append("file",t),e.next=7,ne.a.post("/item/upload",c,n);case 7:return s=e.sent,console.log(s.data),i=JSON.stringify({message:s.data,type:"Picture"}),e.next=12,ne.a.post("/auth/chat/".concat(j.id),i,r);case 12:o=e.sent,g((function(e){return[].concat(Object(x.a)(e),[o.data])})),l=document.getElementById("messagesArea"),u=l.scrollHeight,l.scrollTo({top:u,left:0,behavior:"smooth"}),a.emit("private",o.data),S(""),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),console.log(e.t0.response.data.errors);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(t){return e.apply(this,arguments)}}(),"file",500,300)},accept:"image/*",id:"select-image",style:{display:"none"}})]}),Object(X.jsx)(W.a,{item:!0,xs:10,children:Object(X.jsx)("textarea",{className:U.messageTypingInput,id:"textArea",onChange:function(e){var t=e.target.value;return t.length>=500?alert("maximum characters length exceeded "):10===t.charCodeAt(t.length-1)?G():void S(e.target.value)},value:v,disabled:I})}),Object(X.jsx)(W.a,{item:!0,xs:1,children:Object(X.jsx)("button",{className:U.messgaeSendButton,onClick:G,children:"SEND"})})]})})]})]})})})),et=(n(447),function(){return Object(X.jsx)("div",{className:"main-screen-loader-conatiner",children:Object(X.jsx)("div",{className:"loader-container",children:Object(X.jsx)("div",{className:"loader",children:"Loading..."})})})}),tt=n(506),nt=n(503);function at(e){return Object(X.jsx)(nt.a,Object(h.a)({elevation:6,variant:"filled"},e))}var rt=function(e){var t=e.message,n=e.type,a=Object(r.useState)(!0),c=Object(C.a)(a,2),s=c[0],i=c[1],o=function(e,t){"clickaway"!==t&&i(!1)};return Object(X.jsx)(tt.a,{open:s,autoHideDuration:2e3,anchorOrigin:{vertical:"bottom",horizontal:"right"},onClose:o,children:Object(X.jsx)(at,{onClose:o,severity:n,children:t})})},ct=Object(u.b)((function(e){return{ModelName:e.model.modelName,NotifierMessage:e.model.notifierMessage,NotifierType:e.model.notifierType}}))((function(e){var t=e.ModelName,n=e.NotifierMessage,a=e.NotifierType;switch(t){case"AsynchronousStart":return Object(X.jsx)(et,{});case"DispalyNotifier":return Object(X.jsx)(rt,{message:n,type:a});case"OpenChatApp":return Object(X.jsx)(Ze,{});default:return null}})),st=function(e){Object(_e.a)(n,e);var t=Object(Pe.a)(n);function n(){return Object(De.a)(this,n),t.apply(this,arguments)}return Object(Re.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),n}(r.Component),it=Object(l.f)(st);var ot=function(){return Object(r.useEffect)((function(){v.dispatch(ae())}),[]),Object(X.jsx)(u.a,{store:v,children:Object(X.jsx)(o.a,{children:Object(X.jsxs)(it,{children:[Object(X.jsx)(Me,{}),Object(X.jsx)(ct,{}),Object(X.jsxs)(l.c,{children:[Object(X.jsx)(l.a,{path:"/",exact:!0,component:qe}),Object(X.jsx)(l.a,{path:"/details/:id",component:Fe})]})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(X.jsx)(ot,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[448,1,2]]]);
//# sourceMappingURL=main.8c3f55dc.chunk.js.map